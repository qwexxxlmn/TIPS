# Приложение для расчёта стационарных вероятностей и визуализации графа состояний (N=8)

Приложение по дисциплине **«Теория информационных процессов и систем»**.  
Реализует графический интерфейс (Tkinter) для задания интенсивностей отказов **λ₁…λ₈**, расчёта стационарного распределения **цепи Маркова с непрерывным временем (CTMC)** и построения/экспорта графа состояний.

---

## 1. Краткое описание модели

### Система
- Количество компьютеров: **N = 8** (фиксировано по условию).
- Состояние системы задаётся битовым вектором длины N:
  - `0` — компьютер исправен  
  - `1` — компьютер отказал

Всего состояний: **2⁸ = 256**.

### Переходы
Для каждого компьютера i:
- отказ: `0 → 1` с интенсивностью **λᵢ** (вводится пользователем)
- восстановление: `1 → 0` с интенсивностью **μ**  

По условию μ не задано, но для существования стационарного режима восстановление требуется.  
В коде используется константа:

- `MU_REPAIR = 0.05`

### Расчёт
Строится матрица генератора `Q` размера `256×256`, затем решается система:

- `π Q = 0`, `sum(π) = 1`

Получаем стационарные вероятности всех 256 состояний, а также агрегированные вероятности по числу отказавших компьютеров `P(k)`.

---

## 2. Возможности программы

### Ввод параметров
- Ввод интенсивностей отказов **λ₁…λ₈** в прокручиваемом блоке.

### Расчёт результатов
После нажатия **«Рассчитать»**:
- выводятся все стационарные вероятности `P(state)` для 256 состояний;
- считается агрегированное распределение `P(k)` по числу отказов `k = 0..8`;
- выводятся контрольные значения:
  - `P(0 отказов)`
  - математическое ожидание числа отказавших
  - сумма вероятностей (должна быть ~1)

### Графы состояний
Доступны варианты:
1) **Показать общий граф** (все дуги для всех i сразу) — плотный и с наложениями (это нормально для N=8).
2) **Сохранить PDF на 8 страниц (i=1..8)** — лучший вариант для отчёта:
   - на каждой странице показаны **все 256 состояний**,
   - но дуги и подписи отображаются только для **одного i** → почти без «слипания».
3) **Сохранить общий граф в PNG** (как один рисунок).

---

## 3. Интерфейс (GUI)

### Меню
- **Файл**
  - загрузить λ из файла
  - сохранить λ в файл
  - экспорт результатов в CSV
  - выход
- **Вид**
  - сохранить граф в PDF (8 страниц)
  - показать общий граф
  - сохранить общий граф в PNG
- **Справка**
  - размерность модели
  - о программе

### Блок результатов
- слева таблица `P(k)` (k отказов)
- справа текстовый вывод всех `P(state)` (со скроллбаром)

---

## 4. Требования и установка

### Требуется Python
- Python **3.10+** (рекомендуется)

### Зависимости
Используются библиотеки:
- `numpy`
- `matplotlib`
- `networkx`

Установка:

```bash
pip install numpy matplotlib networkx
```

Tkinter обычно встроен в Python на Windows/macOS. На Linux может потребоваться пакет `python3-tk`.

---

## 5. Запуск

Сохраните код в файл, например `code.py`, затем:

```bash
python code.py
```

---

## 6. Работа с файлами

### Загрузка/сохранение λ
- Сохранение идёт в CSV (разделитель `;`), формат:
  - заголовок: `i;lambda`
  - далее значения λ₁…λ₈

### Экспорт результатов (CSV)
Экспорт включает:
- N, число состояний, MU_REPAIR
- таблицу `P(k)`
- вероятности всех состояний (битовая строка и `P(state)`)

### Сохранение графов
- **PDF (8 страниц)**: одна страница на `i=1..8` (самый удобный для чтения и отчёта)
- **PNG общий**: один большой рисунок (может быть тяжёлым и плотным)

---

## 7. Структура кода (кратко)

- **Модель**
  - `generate_states`
  - `build_generator_matrix`
  - `solve_stationary`
  - `run_model`
- **Графы**
  - `_layered_layout_by_k`
  - `draw_full_state_graph_page`
  - `save_full_graph_pdf_per_i`
- **GUI**
  - `ScrollableFrame`
  - `SafetySystemApp`
